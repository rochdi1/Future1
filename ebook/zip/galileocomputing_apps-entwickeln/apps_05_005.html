<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
      <meta name="title" content="Galileo Computing :: Apps entwickeln für iPhone und iPad - 5 Animationen und Layer">
      <meta name="author" content="Klaus M. Rodewig, Clemens Wagner">
      <meta name="publisher" content="Galileo Press 2011">
      <meta name="copyright" content="Galileo Press 2011">
      <meta name="Desription" content="Apps entwickeln für iPhone und iPad - Das Praxisbuch - 5 Animationen und Layer">
      <meta name="robots" content="INDEX,FOLLOW">
      <meta http-equiv="content-language" content="de">
      <title>Galileo Computing :: Apps entwickeln für iPhone und iPad - 5 Animationen und Layer</title>
      <link rel="stylesheet" type="text/css" href="common/galileo_open.css">
      <link rel="stylesheet" type="text/css" href="common/prettify.css">
      <link rel="stylesheet" type="text/css" media="screen" href="common/css/lightbox.css">
      &nbsp; &nbsp; &nbsp;                  <script type="text/javascript" src="common/js/prototype.js"></script>
      &nbsp; &nbsp; &nbsp;                  <script src="common/js/scriptaculous.js?load=effects,builder"></script>
      &nbsp; &nbsp; &nbsp;                  <script type="text/javascript" src="common/js/lightbox.js"></script><link rel="prev" href="apps_05_004.html">
      <link rel="next" href="apps_06_001.html"><script type="text/javascript" src="common/prettify.js"></script><script type="text/javascript" src="common/openwin.js"></script></head>
   <body vlink="#000099" link="#000099" alink="#000099" onload="prettyPrint()">
      <table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="#000066">
         <tr>
            <td height="74" valign="bottom" colspan="2"><a href="http://www.galileocomputing.de/katalog/openbook/?GPP=opAppiP"><img src="common/galileocomputing_openbook.gif" width="200" height="56" border="0" alt="Galileo Computing < openbook &gt;" title="Galileo Computing < openbook &gt;"></a></td>
            <td width="80" height="74"><a href="http://www.galileocomputing.de/?GPP=opAppiP"><img src="common/galileocomputing.gif" border="0" alt="Galileo Computing - Professionelle Bücher. Auch für Einsteiger." title="Galileo Computing - Professionelle Bücher. Auch für Einsteiger."></a></td>
         </tr>
      </table>
      <div align="right"><a href="http://www.galileocomputing.de/?GPP=opAppiP" class="navnav">Professionelle Bücher. Auch für Einsteiger.</a></div><br><table class="tbl" border="0" cellpadding="0" cellspacing="0" width="100%">
         <tbody>
            <tr>
               <td width="190" valign="top">
                  <table class="tbl1" border="0" cellpadding="3" cellspacing="0" width="190" align="left">
                     <tbody>
                        <tr>
                           <td class="tbl2"><a class="nav" href="index.html">Inhaltsverzeichnis</a></td>
                        </tr>
                        <tr>
                           <td><a class="navnav" href="apps_00_widmung_001.html#"></a></td>
                        </tr>
                        <tr>
                           <td><a class="navnav" href="apps_00_geleitwort_001.html#dodtpfad62f21-21f9-4eae-9038-c462dc2de850">Geleitwort des Gutachters</a></td>
                        </tr>
                        <tr>
                           <td><a class="navnav" href="apps_00_vorwort_001.html#dodtp134aa4f5-3ea1-4d2b-90ec-625e9ad04995">Vorwort</a></td>
                        </tr>
                        <tr>
                           <td><a class="navnav" href="apps_01_001.html#dodtp06116df0-71a6-4127-9c90-87cc60beb89d">1 Einführung</a></td>
                        </tr>
                        <tr>
                           <td><a class="navnav" href="apps_02_001.html#dodtp13428fe8-22e7-48ed-b301-c766518dcaac">2 Einstieg in die Praxis</a></td>
                        </tr>
                        <tr>
                           <td><a class="navnav" href="apps_03_001.html#dodtpd90d1a51-f4d6-4634-a164-a45ebd6f9dff">3 Aufwachen &#8211; analoger Wecker</a></td>
                        </tr>
                        <tr>
                           <td><a class="navnav" href="apps_04_001.html#dodtpa5a111c6-3a92-4be9-aa3a-ed64f8951ac6">4 Daten, Tabellen und Controller</a></td>
                        </tr>
                        <tr>
                           <td><a class="navh" href="#dodtpa5dbcb97-8e52-44af-b2a1-d51145cf8406">5 Animationen und Layer</a></td>
                        </tr>
                        <tr>
                           <td><a class="navnav" href="apps_06_001.html#dodtp610fd647-93cb-4bff-b94e-30d1cceb28fc">6 Programmieren, aber sicher</a></td>
                        </tr>
                        <tr>
                           <td><a class="navnav" href="apps_07_001.html#dodtp35da27e0-4c50-417c-a28d-f5907117d740">7 Jahrmarkt der Nützlichkeiten</a></td>
                        </tr>
                        <tr>
                           <td><a class="navnav" href="apps_anhang_a_dvd-inhalt_001.html#dodtp71232b80-1f13-4c5a-88ac-de2264b674f7">A Die Buch-DVD</a></td>
                        </tr>
                        <tr>
                           <td><a class="navnav" href="stichwort.html">Stichwort</a></td>
                        </tr>
                        <tr>
                           <td><br><a href="http://download2.galileo-press.de/openbook/galileocomputing_apps-entwickeln.zip" class="navnav"><strong>Download:</strong><br>- ZIP, ca. 23,6 MB</a></td>
                        </tr>
                        <tr>
                           <td><a href="http://www.galileo-press.de/3521?GPP=opAppiP" class="navnav">Buch bestellen</a></td>
                        </tr>
                        <tr>
                           <td><a class="navnav" href="#kommentar">Ihre Meinung?</a><br><br></td>
                        </tr>
                     </tbody>
                  </table>
               </td>
               <td width="10"><img src="common/spacer10.gif" width="10" height="10" alt="Spacer"></td>
               <td width="85%" valign="top">
                  <div align="center">
                     <table width="98%" border="0" cellpadding="0" cellspacing="0" bgcolor="#FFFFFF">
                        <tbody>
                           <tr>
                              <td width="100%" class="start" colspan="1" height="22" align="center">
                                 <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                    <tbody>
                                       <tr>
                                          <td width="25%">
                                             <div align="left"><a href="apps_05_004.html" class="navnav"> &lt;&lt; zurück</a></div>
                                          </td>
                                          <td width="49%">
                                             <div align="center"><a href="http://www.galileocomputing.de/?GPP=opAppiP" class="navnav">Galileo Computing</a> / <a href="http://www.galileocomputing.de/katalog/openbook/?GPP=opAppiP" class="navnav">
                                                   &lt;openbook&gt;</a> / <a href="index.html" class="navnav">Apps entwickeln für iPhone und iPad</a></div>
                                          </td>
                                          <td width="25%">
                                             <div align="right"><a href="apps_06_001.html" class="navnav">vor &gt;&gt; </a></div>
                                          </td>
                                       </tr>
                                    </tbody>
                                 </table>
                              </td>
                           </tr>
                           <tr>
                              <td width="100%" valign="top">
                                 <table width="100%" border="0" cellpadding="10" cellspacing="0" class="box">
                                    <tbody>
                                       <tr>
                                          <td colspan="2"><a href="http://www.galileocomputing.de/?GPP=opAppiP" class="buchtitel">Apps entwickeln für iPhone und iPad</a><span class="autor"> von Klaus M. Rodewig, Clemens Wagner</span><br><span class="untertitel">Das Praxisbuch</span></td>
                                       </tr>
                                       <tr>
                                          <td valign="top" width="211">
                                             <dl>
                                                <dt><a href="http://www.galileo-press.de/3521?GPP=opAppiP" class="navnav"><img src="common/9783836214636.jpg" border="0" alt="Buch: Apps entwickeln für iPhone und iPad" title="Buch: Apps entwickeln für iPhone und iPad"></a></dt>
                                                <dd><br><a href="http://www.galileo-press.de/3521?GPP=opAppiP"><span class="autor"><strong>Apps entwickeln für iPhone und iPad</strong><br><pressinfo>geb., mit DVD<br>515 S., 49,90 Euro<br>Galileo Computing<br>ISBN 978-3-8362-1463-6
                                                         <br><br>Die <strong>Neuauflage</strong> des Buches erhalten Sie in unserem Online-Shop - <em>versandkostenfrei</em> innerhalb Deutschlands und Österreichs.<br><a class="navnav" href="http://www.galileo-press.de/3521?GPP=opAppiP"><img src="common/pfeil_rechts5.gif" alt="" border="0">Zum Online-Shop</a></span></span></a></dd>
                                             </dl>
                                          </td>
                                          <td width="80%">
                                             <table border="0">
                                                <tbody>
                                                   <tr>
                                                      <td valign="baseline"><img src="common/pfeil_u.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline" colspan="3" class="kap"><strong><a href="apps_05_001.html#dodtpa5dbcb97-8e52-44af-b2a1-d51145cf8406" class="navnav">5 Animationen und Layer</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline" colspan="2"><strong><a href="apps_05_001.html#dodtp5efea2f9-5971-4355-9098-73d240420ae8" class="navnav">5.1 Modell und Controller</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline"><strong><a href="apps_05_001.html#dodtpbfefaccf-2786-4687-9caf-bf869a37dd09" class="navnav">5.1.1 iOS Next Topmodel</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline"><strong><a href="apps_05_001.html#dodtpcdb08693-584e-460f-84d6-adbffd990377" class="navnav">5.1.2 View an Controller</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline"><strong><a href="apps_05_001.html#dodtpf43e6bf8-5b92-4faf-8de8-d852c2bdb6e7" class="navnav">5.1.3 Modell an Controller</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline"><strong><a href="apps_05_001.html#dodtpa07cc55d-58b3-412a-b67d-a83e85baebc2" class="navnav">5.1.4 Undo und Redo</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline"><strong><a href="apps_05_001.html#dodtp8755d0e5-718b-4a1b-9167-c6361491d08c" class="navnav">5.1.5 Unittests</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline" colspan="2"><strong><a href="apps_05_002.html#dodtp1c3f3d80-581b-478e-88bc-c9ed3a708401" class="navnav">5.2 Als die Views das Laufen lernten</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline"><strong><a href="apps_05_002.html#dodtp9e9cf9b7-2f55-4fed-b3b6-39449f3b1d7d" class="navnav">5.2.1 Blockfunktionen in C</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline"><strong><a href="apps_05_002.html#dodtp0c53305d-45fe-44c6-9852-ea8594b2c837" class="navnav">5.2.2 Animationen mit Blöcken</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline"><strong><a href="apps_05_002.html#dodtp85028dc1-a1a1-40c9-bcc3-4f753ef479e3" class="navnav">5.2.3 Transitionen</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline"><strong><a href="apps_05_002.html#dodtp0a0f2033-6d33-4367-b1ba-3a224955f8bd" class="navnav">5.2.4 Zur Animation? Bitte jeder nur einen Block!</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline" colspan="2"><strong><a href="apps_05_003.html#dodtpb1c7ea8c-fe2c-4936-9c9a-8ec6e345a78e" class="navnav">5.3 Core Animation</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline"><strong><a href="apps_05_003.html#dodtpc7304b46-d817-4f7c-ad3a-655bdf12d064" class="navnav">5.3.1 Layer</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline"><strong><a href="apps_05_003.html#dodtp766676af-c5c5-4b69-bb6c-a92f38e6040d" class="navnav">5.3.2 Vordefinierte Layerklassen</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline"><strong><a href="apps_05_003.html#dodtp13aeb6cc-99bc-4e4b-9ee7-186982cef3cb" class="navnav">5.3.3 Unser Button soll schöner werden</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline"><strong><a href="apps_05_003.html#dodtp66fddda2-3ee3-4e44-ae6a-6901c9f96a1e" class="navnav">5.3.4 Spieglein, Spieglein an der Wand</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline"><strong><a href="apps_05_003.html#dodtpce26e4e5-0327-4743-bbd7-d6b3b9eee6d8" class="navnav">5.3.5 Der bewegte Layer</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline"><strong><a href="apps_05_003.html#dodtpfb02b879-0cc7-44cd-91fb-be429ae0b56f" class="navnav">5.3.6 Der View, der Layer, seine Animation und ihr Liebhaber</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline"><strong><a href="apps_05_003.html#dodtp3d532cce-a949-4cbb-b90f-83cb4ca2c6e0" class="navnav">5.3.7 Die 3. Dimension</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline" colspan="2"><strong><a href="apps_05_004.html#dodtpb92345dc-dbc2-4f78-8e86-ca5d585914c1" class="navnav">5.4 Der Tabbar-Controller</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline"><strong><a href="apps_05_004.html#dodtp74751c51-49aa-4a38-a753-b920e7ddf1e4" class="navnav">5.4.1 Aufbau einer Reiternavigation</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline"><strong><a href="apps_05_004.html#dodtp3dc6d335-db6c-4eeb-a3d7-2fd60f934221" class="navnav">5.4.2 Für ein paar Controller mehr</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline" colspan="2"><strong><a href="apps_05_005.html#dodtpbb883a33-ad82-42a5-9e9b-a3878fb20332" class="navh">5.5 Was Sie schon immer über Instruments wissen wollten, aber nie zu fragen wagten</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline"><strong><a href="apps_05_005.html#dodtp4af905ee-fd2f-407d-8fe3-1cf49c378f4b" class="navh">5.5.1 Spiel mir das Lied vom Leak</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline"><strong><a href="apps_05_005.html#dodtp20f3171b-12d7-4643-a316-ccfff954fba9" class="navh">5.5.2 Ich folgte einem Zombie</a></strong></td>
                                                   </tr>
                                                   <tr>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"></td>
                                                      <td valign="baseline" width="10"><img src="common/pfeil_rechts5.gif" width="10" height="10" border="0" alt="Pfeil"></td>
                                                      <td valign="baseline"><strong><a href="apps_05_005.html#dodtp613c16ef-6413-4c04-a7d1-268d8e43a5e9" class="navh">5.5.3 Time Bandits</a></strong></td>
                                                   </tr>
                                                </tbody>
                                             </table>
                                          </td>
                                       </tr>
                                    </tbody>
                                 </table>
                                 <table width="100%" cellpadding="20" cellspacing="0" border="0" bgcolor="#eeeeee">
                                    <tbody>
                                       <tr>
                                          <td>
                                             <div class="main"><br><div align="center"><a href="#top"><img src="common/jupiters.gif" border="0" alt="Galileo Computing - Zum Seitenanfang"></a></div><a id="dodtpbb883a33-ad82-42a5-9e9b-a3878fb20332" name="dodtpbb883a33-ad82-42a5-9e9b-a3878fb20332"></a><h2 class="t2"><span class="cfett">5.5</span><span class="cfett"> Was Sie schon immer über Instruments wissen wollten, aber nie zu fragen wagten</span><a href="#dodtp4af905ee-fd2f-407d-8fe3-1cf49c378f4b"><img src="common/down.gif" width="15" height="15" border="0" alt="Zur nächsten Überschrift"></a></h2>
                                                <p>Und nun zu etwas ganz anderem: Wie gut kennen Sie eigentlich noch die Speicherverwaltungsregeln?
                                                   In welchen Fällen hält noch mal eine Variable das Objekt, auf das sie verweist? Wenn
                                                   Sie sich jetzt unsicher sind, dürfen Sie natürlich gerne noch mal zurückblättern.
                                                   Aber auch dann, wenn Sie die Regeln und ihre Anwendung beherrschen, unterläuft Ihnen
                                                   wahrscheinlich von Zeit zu Zeit der eine oder andere Speicherverwaltungsfehler. Wenn
                                                   Sie Glück haben, sendet Ihnen Ihr Programm zarte Hinweise. Im schlechtesten Fall macht
                                                   es das aber nur bei den Nutzern Ihrer App. Nach Murphys Gesetz &#8211; »Was schiefgehen
                                                   kann, geht schief« &#8211; ist Letzteres der Regelfall.
                                                </p>
                                                <p>Sie können und sollten den Analyzer über Ihren Programmcode laufen lassen und versuchen,
                                                   möglichst alle Warnungen zu beseitigen. Aber leider findet auch der Analyzer nicht
                                                   alle Fehler. Auch mit dem Debugger finden Sie nicht alle Schwachstellen, da dieser
                                                   Pedant einen viel zu kleinteiligen Blick auf Ihre App wirft. Doch es gibt ein Gegenmittel:
                                                   <span class="cbegriff">Instruments</span> und Arbeit. Da Sie von Arbeit sicherlich schon mal gehört haben, dreht sich dieser
                                                   Abschnitt hauptsächlich um Instruments.
                                                </p><a href="bilder/05_023.png" rel="lightbox" title="Starten von Instruments"><img class="bild" border="1" src="bilderklein/klein05_023.png" alt="Abbildung"></a><p class="pbildunter"><strong>Abbildung 5.23   </strong>Starten von Instruments
                                                </p>
                                                <p><span class="cbegriff">Instruments</span><a class="indexterm" id="dodtp5f13d1d5-1428-4fcb-a73c-b7fc5e8503c0"></a> ist ein Programm aus den Entwicklungswerkzeugen von Apple, das Sie bereits zusammen
                                                   mit dem SDK installiert haben. Es erlaubt die Aufzeichnung und anschließende Analyse
                                                   unterschiedlicher Messwerte Ihrer Programme, um deren Schwachstellen zu finden. Es
                                                   kann Ihnen aber nur Hinweise geben, wo Sie nach den Schwachstellen suchen müssen.
                                                   Es macht Ihnen leider keine Vorschläge zu deren Behebung.
                                                </p>
                                                <p>Instruments funktioniert dabei nach einem Baukastensystem, bei dem jeder Baustein
                                                   ein Messinstrument ist. Sie können für Ihre Instruments-Sitzungen diese Bausteine
                                                   beliebig kombinieren. Zurzeit bietet Instruments ungefähr fünfzig solcher Messinstrumente
                                                   an, von denen allerdings einige Mac OS X vorbehalten sind.
                                                </p>
                                                <p>Sie starten Instruments, indem Sie den Button <span class="cscreenelement">Run</span> oben links in Xcode gedrückt halten und im Dropdown-Menü den Punkt <span class="cscreenelement">Profile</span> auswählen (siehe Abbildung 5.23).
                                                </p><a href="bilder/05_024.png" rel="lightbox" title="Auswahldialog in Instruments"><img class="bild" border="1" src="bilderklein/klein05_024.png" alt="Abbildung"></a><p class="pbildunter"><strong>Abbildung 5.24   </strong>Auswahldialog in Instruments
                                                </p>
                                                <p>Nach dem Start öffnet Instruments den in Abbildung 5.24 dargestellten Auswahldialog,
                                                   mit dem Sie ein bestehendes Instruments-Dokument oder eine Dokumentvorlage auswählen
                                                   können. In der Regel benutzen Sie die zweite Option. Hier bietet Ihnen Instruments
                                                   bereits eine Palette mit vorkonfigurierten Messszenarien an. Alternativ können Sie
                                                   auch eine leere Vorlage auswählen, die Sie individuell nach Ihren Bedürfnissen konfigurieren
                                                   können. Für den Anfang sollten Sie aber ein vorkonfiguriertes Szenario verwenden.
                                                   Falls Instruments Ihr Programm sofort startet, ohne vorher den Auswahldialog anzuzeigen,
                                                   haben Sie wahrscheinlich das Programm noch in Instruments geöffnet. Schließen Sie
                                                   also am besten immer alle Fenster von Instruments, bevor Sie eine neue Analyse starten.
                                                </p>
                                                <table width="100%" border="0" cellspacing="1" cellpadding="3">
                                                   <tbody>
                                                      
                                                      
                                                      <tr>
                                                         
                                                         
                                                         <td class="tabellenkopf"><span class="cfett">
                                                               
                                                               
                                                               
                                                               Operation am lebenden Programm
                                                               
                                                               </span></td>
                                                         
                                                         
                                                      </tr>
                                                      
                                                      
                                                      <tr>
                                                         
                                                         
                                                         <td class="tabellentext">
                                                            <p>Auf der beiliegenden DVD finden Sie das Projekt <span class="cdateipfad">Instruments</span>, das verschiedene Analysesituationen bereitstellt. Es enthält absichtlich Schwachstellen
                                                               für die nachfolgend beschriebenen Messszenarien. Die Schwachstellen im Beispielprojekt
                                                               sind relativ offensichtlich. Wahrscheinlich verstecken sie sich in Ihren Programmen
                                                               wesentlich besser. Hier kommt das zweite Gegenmittel ins Spiel: Arbeit.
                                                               
                                                               
                                                            </p>
                                                         </td>
                                                         
                                                         
                                                      </tr>
                                                      
                                                      
                                                   </tbody>
                                                </table><br><div align="center"><a href="#top"><img src="common/jupiters.gif" border="0" alt="Galileo Computing - Zum Seitenanfang"></a></div><a id="dodtp4af905ee-fd2f-407d-8fe3-1cf49c378f4b" name="dodtp4af905ee-fd2f-407d-8fe3-1cf49c378f4b"></a><h3 class="t3"><span class="cfett">5.5.1</span><span class="cfett"> Spiel mir das Lied vom Leak</span><a href="#dodtp20f3171b-12d7-4643-a316-ccfff954fba9"><img src="common/down.gif" width="15" height="15" border="0" alt="Zur nächsten Überschrift"></a><a href="#dodtpbb883a33-ad82-42a5-9e9b-a3878fb20332"><img src="common/top.gif" width="15" height="15" border="0" alt="Zur vorigen Überschrift"></a></h3>
                                                <p>Eine der wichtigsten Aufgaben von Instruments ist das Auffinden von Speicherlecks.
                                                   Sie führen im schlimmsten Fall nicht direkt zu einem Fehlverhalten Ihres Programms.
                                                   Stattdessen erhält es vom Betriebssystem Speicherwarnungen, deren Verarbeitung die
                                                   App verlangsamen. Schließlich stürzt das Programm dann doch ab, wobei sich die Absturzsituation
                                                   nur sehr schwer reproduzieren lässt.
                                                </p><a href="bilder/05_025.png" rel="lightbox" title="Speicheranalyse mit Instruments"><img class="bild" border="1" src="bilderklein/klein05_025.png" alt="Abbildung"></a><p class="pbildunter"><strong>Abbildung 5.25   </strong>Speicheranalyse mit Instruments
                                                </p>
                                                <p>Öffnen Sie das Instruments-Projekt in Xcode, und starten Sie Instruments wie oben
                                                   beschrieben. Im Auswahldialog wählen Sie die Schablone <span class="cscreenelement">Leaks</span> aus, mit der Sie Speicherlecks<a class="indexterm" id="dodtpbf915c8d-cb8f-4af2-86d9-dbd1c371f121"></a> finden können. Instruments startet Ihre App, abhängig von Ihrer Auswahl in Xcode,
                                                   im Simulator oder auf einem iOS-Gerät. Außerdem öffnet es das in Abbildung 5.25 dargestellte
                                                   Fenster. Die Schablone erzeugt zwei Messinstrumente, die Sie in der linken Spalte
                                                   oben finden. Mit <span class="cscreenelement">Allocations</span> messen Sie den Speicherverbrauch Ihrer App, während <span class="cscreenelement">Leaks</span> die Speicherlecks aufzeichnet.
                                                </p>
                                                <table width="100%" border="0" cellspacing="1" cellpadding="3">
                                                   <tbody>
                                                      
                                                      
                                                      <tr>
                                                         
                                                         
                                                         <td class="tabellenkopf"><span class="cfett">
                                                               
                                                               
                                                               
                                                               Lecks und Automatic Reference Counting<a class="indexterm" id="dodtp053e4feb-afb4-4b21-b313-277bd6d0cd26"></a> (ARC)
                                                               
                                                               </span></td>
                                                         
                                                         
                                                      </tr>
                                                      
                                                      
                                                      <tr>
                                                         
                                                         
                                                         <td class="tabellentext">
                                                            <p>Durch die Einführung von ARC sollte die Suche nach Speicherlecks in den meisten Fällen
                                                               obsolet sein. Aber auch Code, der sich formal korrekt an die Speicherverwaltungsregeln
                                                               hält, kann Speicherlecks enthalten. Wenn Ihr Programm die nicht mehr benötigten Objekte
                                                               sammelt, anstatt sie freizugeben, kann es auch hier passieren, dass der Hauptspeicher vollläuft. Ein Beispiel dafür ist ein Newsreader, der regelmäßig
                                                               die neuen Artikel vom Server abruft. Wenn er aber auch noch alle alten Artikel im
                                                               Hauptspeicher behält, kann ein Speicherüberlauf auftreten.
                                                               
                                                               
                                                            </p>
                                                         </td>
                                                         
                                                         
                                                      </tr>
                                                      
                                                      
                                                      <tr>
                                                         
                                                         
                                                         <td class="tabellentext">
                                                            <p>Hier ist <span class="cscreenelement">Allocations</span> hilfreich, da es Ihnen anzeigt, welche Objekte den meisten Speicherplatz belegen.
                                                               
                                                               
                                                            </p>
                                                         </td>
                                                         
                                                         
                                                      </tr>
                                                      
                                                      
                                                   </tbody>
                                                </table>
                                                <p>Nach dem Start erscheinen neben <span class="cscreenelement">Allocations</span> ein paar blaue senkrechte Striche, während der Bereich neben <span class="cscreenelement">Leaks</span> leer bleibt. Da das Programm bislang auch noch kein Speicherleck erzeugt hat, ist
                                                   das auch richtig so. Wenn Sie den Knopf <span class="cscreenelement">Make Leak</span> in der iPhone-App <span class="cdateipfad">Instruments</span> drücken, erscheinen im <span class="cscreenelement">Leaks</span>-Bereich ein roter und mehrere blaue Balken (siehe Abbildung 5.26). Die roten Balken
                                                   kennzeichnen das Auftreten von Speicherlecks, während die blauen Balken das Verhältnis
                                                   der Leckgrößen im Verlauf der Zeit darstellen. Dabei ist nicht die absolute Höhe der
                                                   Balken interessant, sondern die Höhe und Verteilung der Stufen. Je höher dabei eine
                                                   Stufe ist, umso größer ist das dazugehörende Leck. Je dichter die Stufen beieinander
                                                   stehen, umso mehr Speicherlecks weist ein Programmbereich auf. Sie können durch das
                                                   erneute Drücken des Buttons weitere Speicherlecks erzeugen und so die Stufenbildung
                                                   beobachten.
                                                </p><a href="bilder/05_026.png" rel="lightbox" title="Grafische Anzeige eines Speicherlecks in Instruments"><img class="bild" border="1" src="bilderklein/klein05_026.png" alt="Abbildung"></a><p class="pbildunter"><strong>Abbildung 5.26   </strong>Grafische Anzeige eines Speicherlecks in Instruments
                                                </p>
                                                <p>Oben rechts im Fenster befindet sich der Button <span class="cscreenelement">Stop</span>. Damit können Sie die Ausführung der App beenden, wenn Sie genug Leaks gesammelt
                                                   haben. Durch Auswählen des <span class="cscreenelement">Leaks</span>-Instruments wie in Abbildung 5.26 zeigt Instruments im unteren Fensterbereich Details
                                                   dazu an. In der linken Spalte können Sie die Einstellungen des Instruments anpassen,
                                                   während der Bereich auf der rechten Seite die gefundenen Speicherlecks auflistet (siehe
                                                   Abbildung 5.27).
                                                </p>
                                                <table width="100%" border="0" cellspacing="1" cellpadding="3">
                                                   <tbody>
                                                      
                                                      
                                                      <tr>
                                                         
                                                         
                                                         <td class="tabellenkopf"><span class="cfett">
                                                               
                                                               
                                                               
                                                               Einstellungssache
                                                               
                                                               </span></td>
                                                         
                                                         
                                                      </tr>
                                                      
                                                      
                                                      <tr>
                                                         
                                                         
                                                         <td class="tabellentext">
                                                            <p><span class="cbegriff">Leaks</span> sammelt die Speicherlecks in regelmäßigen Intervallen. Die Intervalllänge ist standardmäßig
                                                               auf 10 Sekunden eingestellt. Über das Eingabefeld <span class="cscreenelement">Snapshot interval</span> können Sie diesen Wert anpassen. Durch Drücken des Buttons <span class="cscreenelement">Snapshot Now</span> sammelt <span class="cbegriff">Leaks</span> augenblicklich alle Speicherlecks. Wenn der Inhalt der Speicherlecks Sie interessiert,
                                                               sollten Sie das Häkchen für <span class="cscreenelement">Gather Leaked Memory Contents</span> setzen. Mit den Einstellungen unter der Überschrift <span class="cscreenelement">Call Tree</span> können Sie die Ausgabe des Aufrufstapels beeinflussen.
                                                               
                                                               
                                                            </p>
                                                         </td>
                                                         
                                                         
                                                      </tr>
                                                      
                                                      
                                                   </tbody>
                                                </table>
                                                </p>
                                                <p><a href="bilder/05_027.png" rel="lightbox" title="Details des Leaks-Instruments"><img class="bild" border="1" src="bilderklein/klein05_027.png" alt="Abbildung"></a><p class="pbildunter"><strong>Abbildung 5.27   </strong>Details des Leaks-Instruments</p>
                                                <p>Wenn Sie den Pfeil eines Speicherlecks in der Spalte <span class="cscreenelement">Address</span> anklicken, gelangen Sie zu den Details des Lecks. Hier können Sie unter anderem den
                                                   Referenzenzähler und die Erzeugungszeit relativ zum Programmstart sehen. Durch einen
                                                   Doppelklick auf die Zeile öffnet Instruments eine Quellcodeanzeige mit der Zeile,
                                                   die das leckende Objekt erzeugt hat. Außerdem können Sie sich über <span class="ctastatur"><img align="top" src="keys/ctastatur_KENNRCk=.gif" alt="CMD" title="CMD"></span> + <span class="ctastatur"><img align="top" src="keys/ctastatur_KEUp.gif" alt="E" title="E"></span> beziehungsweise den Menüpunkt <span class="cscreenelement">View</span> · <span class="cscreenelement">Extended Detail</span> den Aufrufstapel anzeigen lassen. Sie bekommen darüber in vielen Fällen einen recht
                                                   guten Hinweis, wo Sie mit der Fehlersuche für die Speicherverwaltung beginnen sollten.
                                                   Für die Speicherlecks, die der Button <span class="cscreenelement">Make Leak</span> erzeugt, zeigt Instruments die folgende Zeile an:
                                                </p>
                                                <div class="listing"><pre class="prettyprint">id theLeak = [[InstrumentsDemoObject alloc] init];<br></pre></div>
                                                <p>Nach den Speicherverwaltungsregeln muss die Methode <span class="clisting">makeLeak</span> diesem Objekt entweder ein <span class="clisting">release</span> oder ein <span class="clisting">autorelease</span> senden. Dieser Speicherverwaltungsfehler ist also ziemlich offensichtlich. Leider
                                                   ist das in der Praxis in vielen Fällen nicht so einfach.
                                                </p>
                                                <p>Über den Button <span class="cscreenelement">Make Attribute Leak</span> können Sie komplexere Lecks erzeugen. Damit Instruments ein Speicherleck erkennt,
                                                   müssen Sie diesen Button mindestens zweimal anklicken.
                                                </p><a href="bilder/05_028.png" rel="lightbox" title="Detailanzeige für ein komplexeres Leck"><img class="bild" border="1" src="bilderklein/klein05_028.png" alt="Abbildung"></a><p class="pbildunter"><strong>Abbildung 5.28   </strong>Detailanzeige für ein komplexeres Leck
                                                </p>
                                                <p>Wenn Sie sich die Details dieses Lecks ansehen, zeigt Ihnen Instruments vier Zeilen
                                                   statt einer an (siehe Abbildung 5.28). Dabei enthält jede Zeile eine Speicherverwaltungsoperation,
                                                   die das Programm auf dem Objekt ausgeführt hat. Die jeweilige Operation können Sie
                                                   der Spalte <span class="cscreenelement">Event Type</span> entnehmen. Da das alle Speicherverwaltungsoperationen auf dem Objekt sind, wurden
                                                   bei mindestens einer davon die Speicherverwaltungsregeln missachtet. Durch einen Rechtsklick
                                                   auf die Titelleiste können Sie einzelne Spalten ausblenden und so die Darstellung
                                                   an Ihre Bedürfnisse anpassen.
                                                </p>
                                                <p>In der Spalte <span class="cscreenelement">Responsible Caller</span> sehen Sie die Methode, die die Operation aufruft. In der vierten Zeile steht dort
                                                   <span class="clisting">[NSAutoreleasePool release]</span>.
                                                </p> 
                                                <table width="100%" border="0" cellspacing="1" cellpadding="3">
                                                   <tbody>
                                                      
                                                      
                                                      <tr>
                                                         
                                                         
                                                         <td class="tabellenkopf"><span class="cfett">
                                                               
                                                               
                                                               
                                                               Instruments und die Systembibliotheken
                                                               
                                                               </span></td>
                                                         
                                                         
                                                      </tr>
                                                      
                                                      
                                                      <tr>
                                                         
                                                         
                                                         <td class="tabellentext">
                                                            <p>Zu dieser Zeile kann Ihnen Instruments keinen Quellcode anzeigen, da es keinen Zugang
                                                               dazu hat. Für die Überprüfung Ihrer Speicherverwaltung ist das auch nicht notwendig.
                                                               Außerdem sollten Sie die Möglichkeit, dass Cocoa Touch ein Speicherleck erzeugt, erst
                                                               nach Ausschluss aller anderen Möglichkeiten in Betracht ziehen.<span class="footnote"><a id="dodtp55e9e6f3-a48c-4bfd-90ce-f1a21c89ce01">[24](Es gibt aber durchaus einige bekannte Speicherlecks in Cocoa Touch. Aber die Wahrscheinlichkeit, dass Ihr Code den Fehler verursacht, ist wesentlich höher.)</a></span>
                                                               
                                                               
                                                            </p>
                                                         </td>
                                                         
                                                         
                                                      </tr>
                                                      
                                                      
                                                   </tbody>
                                                </table>
                                                <p>Die ersten beiden angezeigten Zeilen verweisen auf den Convenience-Konstruktor <span class="clisting">object</span> der Klasse <span class="clisting">InstrumentsDemoObject</span>. Diese Methode enthält nur eine Alloc-Init-Autorelease-Aufrufkette und hält sich
                                                   offensichtlich an die Speicherverwaltungsregeln. Bleibt also nur noch die Methode
                                                   <span class="clisting">makeAttributeLeak</span> in der Klasse <span class="clisting">InstrumentsViewController</span> als mögliche Ursache übrig (siehe Listing 5.58). Auch diese Methode scheint sich
                                                   an die Speicherverwaltungsregeln zu halten, und beim ersten Aufruf erzeugt diese Methode
                                                   ja auch noch kein Leck.
                                                </p>
                                                <div class="listing"><pre class="prettyprint">- (IBAction)makeAttributeLeak {<br>    attributeLeak = [[InstrumentsDemoObject object] retain];<br>}<br></pre></div>
                                                <p class="plistingunter"><strong>Listing 5.58   </strong>Speicherleck bei Attributzuweisung
                                                </p>
                                                <p>Wenn Sie die Methode aber wiederholt ausführen, gibt sie das Objekt, auf das <span class="clisting">attributeLeak</span> verweist, nicht frei. Nach den Speicherverwaltungsregeln muss sie das aber machen,
                                                   da die Variable das Objekt hält. Um diesen Speicherverwaltungsfehler zu beheben, können
                                                   Sie die Anweisung <span class="clisting">[attributeLeak release];</span> vor die Zuweisung einfügen. Da <span class="clisting">attributeLeak</span> eine Property ist, sollten Sie lieber an dieser Stelle den Setter verwenden.
                                                </p>
                                                <div class="listing"><pre class="prettyprint">- (IBAction)makeAttributeLeak {<br>    self.attributeLeak = [InstrumentsDemoObject object];<br>}<br></pre></div>
                                                <p class="plistingunter"><strong>Listing 5.59   </strong>Methode ohne Speicherleck
                                                </p>
                                                <table width="100%" border="0" cellspacing="1" cellpadding="3">
                                                   <tbody>
                                                      
                                                      
                                                      <tr>
                                                         
                                                         
                                                         <td class="tabellenkopf"><span class="cfett">
                                                               
                                                               
                                                               
                                                               Speicherverwaltung
                                                               
                                                               </span></td>
                                                         
                                                         
                                                      </tr>
                                                      
                                                      
                                                      <tr>
                                                         
                                                         
                                                         <td class="tabellentext">
                                                            <p>Der Speicherverwaltungsfehler in der Methode <span class="clisting">makeAttributeLeak</span> ist für Anfänger schwer zu erkennen, und auch der Analyzer in Xcode 4 findet ihn
                                                               nicht. Sie können solche Fehler aber durch die konsequente Verwendung von Propertys
                                                               und Accessoren vermeiden.
                                                               
                                                               
                                                            </p>
                                                         </td>
                                                         
                                                         
                                                      </tr>
                                                      
                                                      
                                                   </tbody>
                                                </table><br><div align="center"><a href="#top"><img src="common/jupiters.gif" border="0" alt="Galileo Computing - Zum Seitenanfang"></a></div><a id="dodtp20f3171b-12d7-4643-a316-ccfff954fba9" name="dodtp20f3171b-12d7-4643-a316-ccfff954fba9"></a><h3 class="t3"><span class="cfett">5.5.2</span><span class="cfett"> Ich folgte einem Zombie</span><a href="#dodtp613c16ef-6413-4c04-a7d1-268d8e43a5e9"><img src="common/down.gif" width="15" height="15" border="0" alt="Zur nächsten Überschrift"></a><a href="#dodtp4af905ee-fd2f-407d-8fe3-1cf49c378f4b"><img src="common/top.gif" width="15" height="15" border="0" alt="Zur vorigen Überschrift"></a></h3>
                                                <p>Was passiert eigentlich, wenn Sie ein Objekt hinter einem Dangling Pointer weiterverwenden?
                                                   Die Antwort ist nichts für schwache Nerven, lieber Leser: Es entsteht ein <span class="cbegriff">Zombie</span><a class="indexterm" id="dodtp3b4d19f7-2447-4d0c-8f4d-64b8b0e290a3"></a>, der in Ihrem Speicher Angst und Schrecken verbreitet. Das Schlimme an Zombies ist,
                                                   dass das von ihnen angerichtete Unheil erst lange nach seiner Entstehung auftreten
                                                   kann.
                                                </p>
                                                <p>In Ihrer App entsteht ein Zombie, wenn Sie einen Verweis auf ein Objekt verwenden,
                                                   nachdem Sie es freigegeben haben. Die Freigabe muss dabei aber nicht unbedingt über
                                                   die gleiche Variable wie der Zombiezugriff erfolgen. Das erschwert natürlich die Suche
                                                   nach diesen Bestien.
                                                </p>
                                                <p>Die Beispiel-App <span class="cdateipfad">Instruments</span> erlaubt Ihnen auch die Erzeugung von Zombies. Sie brauchen dabei aber keine Angst
                                                   zu haben. Sie machen das ja unter Laborbedingungen, und da kann Ihnen nichts passieren
                                                   &#8211; na ja, fast. Starten Sie die App über den <span class="cscreenelement">Profile</span>-Button aus Xcode in <span class="cdateipfad">Instruments</span>, und wählen Sie die Schablone <span class="cscreenelement">Zombies</span> im Auswahldialog aus.
                                                </p><a href="bilder/05_029.png" rel="lightbox" title="Instruments hat einen Zombie entdeckt."><img class="bild" border="1" src="bilderklein/klein05_029.png" alt="Abbildung"></a><p class="pbildunter"><strong>Abbildung 5.29   </strong>Instruments hat einen Zombie entdeckt.
                                                </p>
                                                <p>Nach dem Start zeigt Ihnen Instruments den Speicherverbrauch der App an. Wenn Sie
                                                   zweimal auf den Button <span class="cscreenelement">Make Zombie</span> klicken, hält die Ausführung an. Instruments zeigt einen Dialog wie in Abbildung
                                                   5.29. Durch Anklicken des Pfeils neben der Speicheradresse gelangen Sie zu einer Auflistung
                                                   der Speicherverwaltungsoperationen, die das Programm auf dem Objekt ausgeführt hat.
                                                </p><a href="bilder/05_030.png" rel="lightbox" title="Speicherverwaltungsoperationen eines Zombies"><img class="bild" border="1" src="bilderklein/klein05_030.png" alt="Abbildung"></a><p class="pbildunter"><strong>Abbildung 5.30   </strong>Speicherverwaltungsoperationen eines Zombies
                                                </p>
                                                <p>Die letzte Zeile enthält die Methode oder Funktion, die auf den Zombie zugegriffen
                                                   hat. Es ist die Systemfunktion <span class="clisting">NSLogv</span>, auf deren Quellcode Sie keinen Zugriff haben. Sie können sich über den Aufruf von
                                                   <span class="cscreenelement">View</span> · <span class="cscreenelement">Extended Detail</span> beziehungsweise <span class="ctastatur"><img align="top" src="keys/ctastatur_KENNRCk=.gif" alt="CMD" title="CMD"></span> + <span class="ctastatur"><img align="top" src="keys/ctastatur_KEUp.gif" alt="E" title="E"></span> den Aufrufstapel zu dieser Anweisung auf der rechten Seite des Fensters anzeigen
                                                   lassen. Der Stapel stellt alle Systemsymbole in grauer Schrift mit einem farbigen
                                                   Icon dar. Dagegen stellt er die Symbole aus Ihrem Programmcode in schwarzer Schrift
                                                   mit einem schwarzen Icon dar. Abbildung 5.31 zeigt einen Ausschnitt eines Aufrufstapels.
                                                   Sie können durch einen Doppelklick auf diese Symbole in die entsprechende Stelle des
                                                   Quelltextes springen.
                                                </p><a href="bilder/05_031.png" rel="lightbox" title="Detailansicht und Ausschnitt des Aufrufstapels"><img class="bild" border="1" src="bilderklein/klein05_031.png" alt="Abbildung"></a><p class="pbildunter"><strong>Abbildung 5.31   </strong>Detailansicht und Ausschnitt des Aufrufstapels
                                                </p>
                                                <p>Der Zombie entsteht durch das Release in der fünften Zeile, wie Sie an dem Referenzenzähler
                                                   sehen können. Da dieses Release der Autoreleasepool sendet, kann diese Zeile nicht
                                                   direkt für den Fehler verantwortlich sein. Der Verursacher ist entweder das Release
                                                   der zweiten oder das Autorelease der vierten Zeile. Da sich der Convenience-Konstruktor
                                                   <span class="clisting">object</span> an die Speicherverwaltungsregeln hält, bleibt überraschenderweise nur die Methode
                                                   <span class="clisting">makeZombie</span> als Kandidat übrig.
                                                </p>
                                                <div class="listing"><pre class="prettyprint">- (IBAction)makeZombie {<br>    id theZombie = [InstrumentsDemoObject object];<br>    NSLog(@"zombies=%@", self.zombies);<br>    [self.zombies addObject:theZombie];<br>    [theZombie release];<br>}<br></pre></div>
                                                <p class="plistingunter"><strong>Listing 5.60   </strong>Zombie-Erzeugung
                                                </p>
                                                <p>Da die Methode <span class="clisting">object</span> nicht auf die erste Speicherverwaltungsregel passt, hält die Variable <span class="clisting">theZombie</span> nicht das Objekt. Also darf sie das Objekt auch nicht freigeben.
                                                </p>
                                                <table width="100%" border="0" cellspacing="1" cellpadding="3">
                                                   <tbody>
                                                      
                                                      
                                                      <tr>
                                                         
                                                         
                                                         <td class="tabellenkopf"><span class="cfett">
                                                               
                                                               
                                                               
                                                               Zombies und Automatic Reference Counting<a class="indexterm" id="dodtp68460960-883c-4bae-bed7-768a79cf9874"></a> (ARC)
                                                               
                                                               </span></td>
                                                         
                                                         
                                                      </tr>
                                                      
                                                      
                                                      <tr>
                                                         
                                                         
                                                         <td class="tabellentext">
                                                            <p>Von einem ARC-Compiler übersetzter Code sollte in der Regel keine Zombies mehr erzeugen.
                                                               Sie können zwar auch damit Zombies durch die Verwendung von <span class="clisting">void</span>-Zeigern oder des Modifizierers <span class="clisting">__unsafe_unretained</span> erzwingen. Diese Fälle sollten in der Praxis aber extrem selten auftreten.
                                                               
                                                               
                                                            </p>
                                                         </td>
                                                         
                                                         
                                                      </tr>
                                                      
                                                      
                                                   </tbody>
                                                </table><br><div align="center"><a href="#top"><img src="common/jupiters.gif" border="0" alt="Galileo Computing - Zum Seitenanfang"></a></div><a id="dodtp613c16ef-6413-4c04-a7d1-268d8e43a5e9" name="dodtp613c16ef-6413-4c04-a7d1-268d8e43a5e9"></a><h3 class="t3"><span class="cfett">5.5.3</span><span class="cfett"> Time Bandits</span><a href="#dodtp20f3171b-12d7-4643-a316-ccfff954fba9"><img src="common/top.gif" width="15" height="15" border="0" alt="Zur vorigen Überschrift"></a></h3>
                                                <p>Instruments hilft Ihnen aber nicht nur beim Finden Ihrer Speicherverwaltungsfehler,
                                                   sondern es kann auch andere Schwachstellen des Programms aufdecken. Zu den gesuchtesten
                                                   Schwachstellen in Programmen gehören die Methoden und Funktionen, die Ihr Programm
                                                   langsam und schwerfällig machen.
                                                </p>
                                                <p>Je öfter Sie im <span class="cdateipfad">Instruments</span>-Beispielprogramm auf den Button <span class="cscreenelement">Compute Sum</span> drücken, umso länger braucht die App für die Berechnung der angezeigten Werte. Um
                                                   dem Zeitfresser auf die Spur zu kommen, starten Sie das Programm in Instruments aus
                                                   Xcode heraus. Im Auswahldialog wählen Sie die Schablone <span class="cscreenelement">Time Profiler</span> aus.
                                                </p>
                                                <p>Nach dem Start der App bleibt der untere Bereich zunächst leer. Wenn Sie einige Male
                                                   den Button <span class="cscreenelement">Compute Sum</span> drücken, füllt Instruments die Anzeige mit Funktions- und Methodennamen. Stellen
                                                   Sie die Sortierung nach der ersten Spalte, <span class="cscreenelement">Running (Self),</span> absteigend ein. Sie zeigt Ihnen den absoluten und den relativen Zeitverbrauch<a class="indexterm" id="dodtp53344c1d-ca6c-461a-a569-0c99a22ad638"></a> für die Ausführung des jeweiligen Symbols. Nach mehrfachem Drücken des Buttons erscheint
                                                   das Symbol <span class="clisting">objc_msgSend</span> als oberstes Element in der Anzeige.
                                                </p><a href="bilder/05_032.png" rel="lightbox" title="Aufgeklappter Aufrufstapel"><img class="bild" border="1" src="bilderklein/klein05_032.png" alt="Abbildung"></a><p class="pbildunter"><strong>Abbildung 5.32   </strong>Aufgeklappter Aufrufstapel
                                                </p>
                                                <p>Hinter jedem Symbol verbirgt sich ein Aufrufstapel, den Sie sich durch Anklicken des
                                                   Dreiecks links neben dem Symbol ansehen können. Wenn Sie dabei die <span class="ctastatur"><img align="top" src="keys/ctastatur_KEFMVCk=.gif" alt="ALT" title="ALT"></span>-Taste gedrückt halten, klappen Sie den kompletten Baum auf einmal auf. Die Anzeige
                                                   sollte dann wie in Abbildung 5.32 aussehen.
                                                </p>
                                                <p>Das zweite Symbol in dem Stapel ist die Methode <span class="clisting">sum</span> in der Klasse <span class="clisting">InstrumentsDemoObject</span>. Anscheinend hat diese Methode einen gesegneten Hunger auf Ihre wertvolle Zeit. Durch
                                                   einen Doppelklick gelangen Sie zu einer Ansicht des entsprechenden Quellcodes. Dort
                                                   sehen Sie aber nicht nur den Quelltext, sondern auch Prozentzahlen an einigen Zeilen.
                                                   Die Ansicht gibt jeweils die relative Zeit für die Ausführung der Zeile an. Anscheinend
                                                   verbraucht die Methode <span class="clisting">sum</span> ihre Rechenzeit fast komplett im Schleifenrumpf für den Aufruf der Methode <span class="clisting">successorWithIndex:</span> (siehe Abbildung 5.33).
                                                </p><a href="bilder/05_033.png" rel="lightbox" title="Anzeige des Zeitverbrauchs im Quelltext"><img class="bild" border="1" src="bilderklein/klein05_033.png" alt="Abbildung"></a><p class="pbildunter"><strong>Abbildung 5.33   </strong>Anzeige des Zeitverbrauchs im Quelltext
                                                </p>
                                                <p>Wenn Sie auf der linken Seite unter der Rubrik <span class="cscreenelement">Call Tree</span> die Optionen Show <span class="cscreenelement">Obj-C Only</span> und <span class="cscreenelement">Hide System Libraries</span> einschalten, schrumpft die Anzeige auf der rechten Seite zusammen. Sie sehen dann
                                                   nur noch die von Ihnen erstellten Methoden. Dort finden Sie auch die Methode <span class="clisting">successorWithIndex:</span> (siehe Abbildung 5.34). Durch einen Doppelklick auf die Zeile gelangen Sie auch hier
                                                   zur Quellcodeansicht. Diese Methode verbraucht fast ihre komplette Rechenzeit für
                                                   den Aufruf der Property <span class="clisting">successor</span>.
                                                </p><a href="bilder/05_034.png" rel="lightbox" title="Gefilterter Aufrufstapel"><img class="bild" border="1" src="bilderklein/klein05_034.png" alt="Abbildung"></a><p class="pbildunter"><strong>Abbildung 5.34   </strong>Gefilterter Aufrufstapel
                                                </p>
                                                <p>Da es sich um eine synthetisierte Property handelt, sieht das zunächst nach einer
                                                   Sackgasse aus. Ein einzelner lesender Property-Aufruf verbraucht aber natürlich nicht
                                                   so viel Zeit. Aber er befindet sich in einer Schleife, und die Methode <span class="clisting">successorWithIndex:</span> befindet sich ebenfalls in einer Schleife. Die Anzahl der Schritte der inneren Schleife
                                                   hängt von dem Parameter <span class="clisting">inIndex</span> ab. Dessen Wert ist der Schleifenindex der äußeren Schleife. Wenn die äußere Schleife
                                                   bis 8 läuft, dann ruft die App <span class="clisting">successorWithIndex:</span> insgesamt 8-mal auf und liest die Property 0 + 1 + 2 + 3 + 4 + 5 + 6 + 7 = 28-mal
                                                   aus. Bei einer Länge von 1000 kommen schon 500.500 Zugriffe zustande, und bei 8000
                                                   sind es schon über 32 Millionen. Das verbraucht natürlich auch einiges an Rechenzeit.
                                                </p>
                                                <p>Zur Behebung dieses Performanceleaks<a class="indexterm" id="dodtpcf3fc427-8d8f-41dd-8547-4b84fa14814b"></a> ist also eine Neuimplementierung von <span class="clisting">sum</span> notwendig. Anstatt auf die verkettete Liste über einen Index zuzugreifen, sollte
                                                   sich die Schleife lieber über einen Zeiger durch die Liste hangeln:
                                                </p>
                                                <div class="listing"><pre class="prettyprint">- (NSUInteger)sum {<br>    NSUInteger theSum = 0;<br>    InstrumentsDemoObject *theItem = self;<br>    while(theItem) {<br>        theSum += theItem.counter;<br>        theItem = theItem.successor;<br>    }<br>    return theItem;<br>}<br></pre></div>
                                                <p class="plistingunter"><strong>Listing 5.61   </strong>Effizientere Implementierung der Summenberechnung
                                                </p>
                                                <p>Dieses Verfahren besucht jedes Listenelement nur einmal. Bei einer Listenlänge von
                                                   8000 Einträgen liest diese Implementierung den Nachfolger auch nur 8000-mal aus.
                                                </p>
                                                <table width="100%" border="0" cellspacing="1" cellpadding="3">
                                                   <tbody>
                                                      
                                                      
                                                      <tr>
                                                         
                                                         
                                                         <td class="tabellenkopf"><span class="cfett">
                                                               
                                                               
                                                               
                                                               Das leidige Thema Arbeit
                                                               
                                                               </span></td>
                                                         
                                                         
                                                      </tr>
                                                      
                                                      
                                                      <tr>
                                                         
                                                         
                                                         <td class="tabellentext">
                                                            <p><span class="cbegriff">Instruments</span> kann Ihnen nur Hinweise auf die Schwachstellen in Ihren Programmen liefern. Die Behebung
                                                               überlässt es großzügigerweise Ihnen ganz allein. Für die Suche nach Speicherverwaltungsfehlern
                                                               kommen Sie also trotz Instruments nicht um die Kenntnis der Regeln herum.
                                                               <br><br>
                                                               Die Zeiträuber in Ihrer App zu suchen und zu beseitigen, ist da schon komplizierter.
                                                               Zwar liefert Ihnen hier der Time Profiler<a class="indexterm" id="dodtp58df4434-3d93-44bc-8872-b601a493aa87"></a> gute Hinweise, aber das Beseitigen ist unter Umständen sehr schwierig oder gar unmöglich.
                                                               Es muss ja schließlich nicht immer ein effizienteres Verfahren für die entsprechende
                                                               Aufgabe geben.
                                                               
                                                               
                                                            </p>
                                                         </td>
                                                         
                                                         
                                                      </tr>
                                                      
                                                      
                                                      
                                                      
                                                   </tbody>
                                                </table><br><hr><a name="kommentar"></a><h3>Ihr Kommentar</h3>
                                                <p>Wie hat Ihnen das &lt;openbook&gt; gefallen? Wir freuen uns immer über Ihre freundlichen
                                                   und kritischen Rückmeldungen.
                                                </p>
                                                <form action="http://www.galileo-press.de/feedback/openbook" method="post" style="text-align: center; margin-top: 10px;"><input type="hidden" name="openbookurl" value="http://www.galileocomputing.de/katalog/openbook/apps_05_005.html"><input type="hidden" name="buchtitel" value="Apps entwickeln für iPhone und iPad"><input type="hidden" name="Kapitel" value="5 Animationen und Layer"><table border="0">
                                                      <tbody>
                                                         <tr>
                                                            <td><label for="name">Name</label><br></td>
                                                            <td><input type="text" name="name" id="name" size="40"><br></td>
                                                         </tr>
                                                         <tr>
                                                            <td><label for="email">E-Mail</label><br></td>
                                                            <td><input type="text" name="email" id="email" size="40"><br></td>
                                                         </tr>
                                                         <tr>
                                                            <td valign="top"><label for="comment">Ihr Kommentar</label><br></td>
                                                            <td><textarea name="comment" id="comment" rows="10" cols="40"></textarea><br></td>
                                                         </tr>
                                                         <tr>
                                                            <td></td>
                                                            <td><input type="submit" value="Kommentar absenden"></td>
                                                         </tr>
                                                      </tbody>
                                                   </table>
                                                </form>
                                             </div>
                                          </td>
                                       </tr>
                                    </tbody>
                                 </table>
                              </td>
                           </tr>
                           <tr>
                              <td width="100%" class="start" colspan="1" height="22" align="center">
                                 <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                    <tbody>
                                       <tr>
                                          <td width="25%"><a href="apps_05_004.html" class="navnav"> &lt;&lt; zurück</a></td>
                                          <td width="49%">
                                             <div align="center"><a class="navnav" href="#">&lt;top&gt;</a></div>
                                          </td>
                                          <td align="right" width="25%">
                                             <div align="right"><a href="apps_06_001.html" class="navnav">vor &gt;&gt;
                                                   </a></div>
                                          </td>
                                       </tr>
                                    </tbody>
                                 </table>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
               </td>
               <td width="10" valign="top"></td>
               <td width="160" valign="top"><table border="0" cellpadding="0" cellspacing="0" width="160">
                  <tr>
                  <td>
                  <table border="0" cellpadding="0" cellspacing="0" width="100%">
                  <tr>
                  <td class="start" height="20" colspan="2">
                  &nbsp;<a href="http://www.galileocomputing.de/katalog/buecher/?GPP=opAppiP" class="autor">
                  <strong>Zum Katalog</strong></a>
                  
                  </td>
                  </tr>
                  <tr>
                  <td valign="top" class="tbl4" width="2">
                  <img src="common/leer.gif" border="0" height="1" width="1"></td>
                  <td valign="top">
                  <table cellspacing="3">
                  <tr>
                  <td><a href="http://www.galileo-press.de/3521?GPP=opAppiP">
                  <img src="common/2734.png" width="126" height="100" border="0" align="left"
                  hspace="4" vspace="8" alt="Zum Katalog: Neuauflage: Apps programmieren für iPhone und iPad">
                  <br><br><br><br><br><br><strong>Neuauflage: Apps programmieren für iPhone und iPad</strong><br><img
                  src="common/pfeil_rechts5.gif" border="0" alt="">Jetzt bestellen</a><br /><br />
                  </td>
                  </tr>
                  </table>
                  </td>
                  
                  </tr>
                  </table>
                  </td>
                  </tr>
                  <tr>
                  <td><img src="common/leer.gif" height="2" width="1" border="0" /></img></td>
                  </tr>
                  <tr>
                  <td>
                  <table border="0" cellpadding="0" cellspacing="0" width="100%">
                  <tr>
                  <td class="start" height="20" colspan="2"><span class="autor"><strong>&nbsp;Ihre Meinung?</strong></a></td>
                  </tr>
                  <tr>
                  <td valign="top" class="tbl4" width="2"><img src="common/leer.gif" border="0" height="1"
                  width="1"></td>
                  <td valign="top">
                  
                  <table cellspacing="3">
                  <tr>
                  <td>Wie hat Ihnen das &lt;openbook&gt; gefallen?<br><a href="#kommentar"><img src="common/pfeil_rechts5.gif"
                  border="0" alt="">Ihre Meinung</a>
                  <br><br></td>
                  </tr>
                  </table>
                  </td>
                  </tr>
                  </table>
                  </td>
                  </tr>
                  <tr>
                  
                  <td><img src="common/leer.gif" height="2" width="1" border="0" /></img></td>
                  </tr>
                  <tr>
                  <td>
                  </td>
                  </tr>
                  
                  <tr>
                  <td><img src="common/leer.gif" height="2" width="1" border="0" /></img></td>
                  </tr>
                  <tr>
                  <td>
                  <table border="0" cellpadding="0" cellspacing="0" width="100%">
                  <tr>
                  <td class="start" height="20" colspan="2">&nbsp;<a href="http://www.galileocomputing.de/katalog/buecher/?GPP=opAppiP"
                  class="autor"><strong>Buchempfehlungen</strong></a></td>
                  </tr>
                  <tr>
                  <td valign="top" class="tbl4" width="2"><img src="common/leer.gif" border="0" height="1"
                  width="1"></td><td valign="top">
                  <a href="http://www.galileocomputing.de/2448?GPP=opAppiP">
                  <img src="common/1658.png" width="114" height="100" border="0" align="left" hspace="4"
                  vspace="8" alt="Objective-C 2.0 & Cocoa"><br><br><br><br><br><br>&nbsp;Objective-C
                  2.0<br>&nbsp;Cocoa</a><br><br></td>
                  </tr>
                  
                  <tr>
                  <td valign="top" class="tbl4" width="2"><img src="common/leer.gif" border="0" height="1"
                  width="1"></td><td valign="top">
                  <a href="http://www.galileocomputing.de/2663?GPP=opAppiP">
                  <img src="common/1791.png" width="126" height="100" border="0" align="left" hspace="4"
                  vspace="8" alt="Zum Katalog: Mac OS X Lion"><br><br><br><br><br><br><br>&nbsp;Mac
                  OS X Lion</a><br><br></td>
                  </tr>
                  <tr>
                  <td valign="top" class="tbl4" width="2"><img src="common/leer.gif" border="0" height="1"
                  width="1"></td><td valign="top">
                  <a href="http://www.galileocomputing.de/2664?GPP=opAppiP">
                  <img src="common/1792.png" width="122" height="100" border="0" align="left" hspace="4"
                  vspace="8" alt="Zum Katalog: Mac OS X und UNIX"><br><br><br><br><br><br><br>&nbsp;Mac
                  OS X<br>&nbsp;und UNIX</a><br><br></td>
                  </tr>
                  <tr>
                  <td valign="top" class="tbl4" width="2"><img src="common/leer.gif" border="0" height="1"
                  width="1"></td><td valign="top">
                  <a href="http://www.galileocomputing.de/2516?GPP=opAppiP">
                  <img src="common/1697.png" width="122" height="100" border="0" align="left" hspace="4"
                  vspace="8" alt="Zum Katalog: Android 3"><br><br><br><br><br><br><br>&nbsp;Android
                  3</a><br><br></td>
                  </tr>
                  <tr>
                  <td valign="top" class="tbl4" width="2"><img src="common/leer.gif" border="0" height="1"
                  width="1"></td><td valign="top">
                  <a href="http://www.galileocomputing.de/2672?GPP=opAppiP">
                  <img src="common/1802.png" width="116" height="100" border="0" align="left" hspace="4"
                  vspace="8" alt="Zum Katalog: Java ist auch eine Insel"><br><br><br><br><br><br><br>&nbsp;Java
                  ist auch<br>&nbsp;eine Insel</a><br><br></td>
                  </tr>
                  <tr>
                  <td valign="top" class="tbl4" width="2"><img src="common/leer.gif" border="0" height="1"
                  width="1"></td><td valign="top">
                  <a href="http://www.galileocomputing.de/2556?GPP=opAppiP">
                  <img src="common/1725.png" width="124" height="100" border="0" align="left" hspace="4"
                  vspace="8" alt="Zum Katalog: CSS"><br><br><br><br><br><br><br>&nbsp;CSS</a><br><br></td>
                  </tr>
                  <tr>
                  <td valign="top" class="tbl4" width="2"><img src="common/leer.gif" border="0" height="1"
                  width="1"></td><td valign="top">
                  <a href="http://www.galileocomputing.de/2930?GPP=opAppiP">
                  <img src="common/1810.png" width="124" height="100" border="0" align="left" hspace="4"
                  vspace="8" alt="Zum Katalog: jQuery"><br><br><br><br><br><br><br>&nbsp;jQuery</a><br><br></td>
                  </tr>
                  </table></td>
                  </tr>
                  <tr>
                  <td><img src="common/leer.gif" height="2" width="1" border="0" /></img></td>
                  </tr>
                  
                  <tr>
                  <td>
                  <table border="0" cellpadding="0" cellspacing="0" width="100%">
                  <tr>
                  <td class="start" height="20" colspan="2"><span class="autor"><strong>&nbsp;Shopping</strong></span></td>
                  </tr>
                  <tr>
                  <td valign="top" class="tbl4" width="2"><img src="common/leer.gif" border="0" height="1"
                  width="1"></td>
                  <td valign="top">
                  <table cellspacing="3">
                  <tr>
                  <td><b>Versandkostenfrei</b> bestellen in Deutschland und &Ouml;sterreich<br><a href="http://www.galileocomputing.de/hilfe/Shop/?GPP=opAppiP"><img
                  src="common/pfeil_rechts5.gif" border="0" alt="Info">Info</a><br><br></td>
                  
                  </tr>
                  </table>
                  </td>
                  </tr>
                  </table>
                  </td>
                  </tr>
                  </table>
                  </td>
                  </tr>
                  </table>
                  <br><br><hr width="70%" align="center">
                  <div align="center">
                  <p class="standard"><strong>Copyright © Galileo Press 2011</strong><br>
                  Für Ihren privaten Gebrauch dürfen Sie die Online-Version natürlich ausdrucken.
                  Ansonsten unterliegt das &lt;openbook&gt; denselben Bestimmungen, wie die
                  gebundene Ausgabe: Das Werk einschließlich aller seiner Teile ist urheberrechtlich
                  geschützt. Alle Rechte vorbehalten einschließlich der Vervielfältigung, Übersetzung,
                  Mikroverfilmung sowie Einspeicherung und Verarbeitung in elektronischen Systemen.</p><br><a
                  href="http://www.galileocomputing.de/?GPP=opAppiP">[Galileo Computing]</a><br><br>
                  Galileo Press, Rheinwerkallee 4, 53227 Bonn, Tel.: 0228.42150.0, Fax 0228.42150.77,
                  <a href="mailto:info@galileo-press.de">info@galileo-press.de</a></div><br><br>
               </td>
            </tr>
         </tbody>
      </table>
   </body>
</html>